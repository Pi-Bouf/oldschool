; Listing generated by Microsoft (R) Optimizing Compiler Version 13.10.3077 

	TITLE	.\TPatchSession.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
$$TYPES	SEGMENT BYTE USE32 'DEBTYP'
$$TYPES	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
text$yc	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yc	ENDS
CRT$XCA	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCA	ENDS
CRT$XCU	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCU	ENDS
CRT$XCL	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCL	ENDS
CRT$XCC	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCC	ENDS
CRT$XCZ	SEGMENT DWORD USE32 PUBLIC 'DATA'
CRT$XCZ	ENDS
text$yd	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yd	ENDS
ATL$__m	SEGMENT DWORD USE32 PUBLIC ''
ATL$__m	ENDS
ATL$__z	SEGMENT DWORD USE32 PUBLIC ''
ATL$__z	ENDS
ATL$__a	SEGMENT DWORD USE32 PUBLIC ''
ATL$__a	ENDS
xdata$x	SEGMENT DWORD USE32 PUBLIC 'CONST'
xdata$x	ENDS
;	COMDAT ??0CTPatchSession@@QAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_GCTPatchSession@@UAEPAXI@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??1CTPatchSession@@UAE@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?Unlock@?$CComCritSecLock@VCComCriticalSection@ATL@@@ATL@@QAEXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?_Psave@?$_Facetptr@V?$ctype@G@std@@@std@@2PBVfacet@locale@2@B
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ?_Psave@?$_Facetptr@V?$ctype@D@std@@@std@@2PBVfacet@locale@2@B
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ?Unlock@CComCriticalSection@ATL@@QAEJXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??_7CTPatchSession@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
sxdata	SEGMENT DWORD USE32 'SXDATA'
sxdata	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CTPatchSession@@QAE@XZ			; CTPatchSession::CTPatchSession
PUBLIC	??_7CTPatchSession@@6B@				; CTPatchSession::`vftable'
PUBLIC	??_GCTPatchSession@@UAEPAXI@Z			; CTPatchSession::`scalar deleting destructor'
EXTRN	??_ECTPatchSession@@UAEPAXI@Z:NEAR		; CTPatchSession::`vector deleting destructor'
EXTRN	?Say@CSession@@UAEHPAVCPacket@@@Z:NEAR		; CSession::Say
EXTRN	?Open@CSession@@UAEHIAAVCPacket@@@Z:NEAR	; CSession::Open
EXTRN	?Close@CSession@@UAEXXZ:NEAR			; CSession::Close
EXTRN	??0CSession@@QAE@XZ:NEAR			; CSession::CSession
;	COMDAT ??_7CTPatchSession@@6B@
; File c:\users\pierr\desktop\4story - oldschool\sources\tserver\tpatchsvr\tpatchsession.cpp
CONST	SEGMENT
??_7CTPatchSession@@6B@ DD FLAT:?Say@CSession@@UAEHPAVCPacket@@@Z ; CTPatchSession::`vftable'
	DD	FLAT:?Open@CSession@@UAEHIAAVCPacket@@@Z
	DD	FLAT:?Close@CSession@@UAEXXZ
	DD	FLAT:??_ECTPatchSession@@UAEPAXI@Z
; Function compile flags: /Ogty
CONST	ENDS
;	COMDAT ??0CTPatchSession@@QAE@XZ
_TEXT	SEGMENT
??0CTPatchSession@@QAE@XZ PROC NEAR			; CTPatchSession::CTPatchSession, COMDAT
; _this$ = ecx

; 4    : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	e8 00 00 00 00	 call	 ??0CSession@@QAE@XZ	; CSession::CSession
  00008	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET FLAT:??_7CTPatchSession@@6B@

; 5    : 	m_bSessionType = SESSION_CLIENT;

  0000e	c6 46 0c 01	 mov	 BYTE PTR [esi+12], 1

; 6    : 	m_dwTick = 0;

  00012	c7 86 d0 00 08
	00 00 00 00 00	 mov	 DWORD PTR [esi+524496], 0

; 7    : }

  0001c	8b c6		 mov	 eax, esi
  0001e	5e		 pop	 esi
  0001f	c3		 ret	 0
??0CTPatchSession@@QAE@XZ ENDP				; CTPatchSession::CTPatchSession
_TEXT	ENDS
PUBLIC	??1CTPatchSession@@UAE@XZ			; CTPatchSession::~CTPatchSession
EXTRN	??1CSession@@UAE@XZ:NEAR			; CSession::~CSession
; Function compile flags: /Ogty
;	COMDAT ??1CTPatchSession@@UAE@XZ
_TEXT	SEGMENT
??1CTPatchSession@@UAE@XZ PROC NEAR			; CTPatchSession::~CTPatchSession, COMDAT
; _this$ = ecx

; 10   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET FLAT:??_7CTPatchSession@@6B@

; 11   : }

  00006	e9 00 00 00 00	 jmp	 ??1CSession@@UAE@XZ	; CSession::~CSession
??1CTPatchSession@@UAE@XZ ENDP				; CTPatchSession::~CTPatchSession
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:NEAR				; operator delete
; Function compile flags: /Ogty
;	COMDAT ??_GCTPatchSession@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GCTPatchSession@@UAEPAXI@Z PROC NEAR			; CTPatchSession::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	e8 00 00 00 00	 call	 ??1CTPatchSession@@UAE@XZ ; CTPatchSession::~CTPatchSession
  00008	f6 44 24 08 01	 test	 BYTE PTR ___flags$[esp], 1
  0000d	74 09		 je	 SHORT $L93008
  0000f	56		 push	 esi
  00010	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00015	83 c4 04	 add	 esp, 4
$L93008:
  00018	8b c6		 mov	 eax, esi
  0001a	5e		 pop	 esi
  0001b	c2 04 00	 ret	 4
??_GCTPatchSession@@UAEPAXI@Z ENDP			; CTPatchSession::`scalar deleting destructor'
_TEXT	ENDS
END
